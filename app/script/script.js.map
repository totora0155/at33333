{"version":3,"sources":["script.coffee"],"names":[],"mappings":"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","file":"script.js","sourceRoot":"/source/","sourcesContent":["'use strict'\n\nmilkcocoa = new MilkCocoa 'https://io-ji5t7bbws.mlkcca.com:443'\ncounterDS = milkcocoa.dataStore 'counter'\n\n$pane = $('#pane')\n$pane.css\n  height: innerHeight\n  width: innerWidth\n  color: do ->\n    (Please.make_color(\n    \tgolden: false\n    \tsaturation: .65\n    \tvalue: .72\n    ))[0]\n$timer = $('#timer').fitText 0.35\n$timer.css 'height', +($timer.css 'font-size').match(/(\\d+)/)[1] * 1.5\n$counter = $('#counter')\n$sum = $('#sum')\ncounterDS.get 'i5t7p2j10001do9', (data) ->\n  $sum.text data.count\n\nwindow.addEventListener 'resize', ->\n  timeoutID = null\n  clearTimeout timeoutID if timeoutID?\n\n  timeoutID = setTimeout ->\n    $pane.css\n      height: innerHeight\n      width: innerWidth\n\n    $timer.css 'height', +($timer.css 'font-size').match(/(\\d+)/)[1] * 1.5\n  , 500\n\n\nclass Timer\n  _SEC_TIME = 180\n  _$timer = null\n  _remainingSecTime = _SEC_TIME\n\n  _reset = ->\n    _$timer.html \"\"\"03<span class=\"timer-sep\">:</span>00\"\"\"\n    _remainingSecTime = _SEC_TIME\n\n  _fillZero = (num) -> \"0#{num}\"[-2..]\n\n  _calcRemainingMinute = ->\n    min = ~~(_remainingSecTime / 60)\n    _fillZero min\n\n  _calcRemainingSec = ->\n    sec = _remainingSecTime %% 60\n    _fillZero sec\n\n  _setTimer = ->\n    _$timer.html \"\"\"#{_calcRemainingMinute()}<span class=\"timer-sep\">:</span>#{_calcRemainingSec()}\"\"\"\n\n  constructor: (@counter) ->\n    _$timer = $timer\n\n  start: ->\n    setInterval =>\n      if _remainingSecTime is 1\n        @counter.lightup()\n        @counter.addShareCounts()\n        _reset()\n      else\n        _remainingSecTime--\n        _setTimer()\n    , 1000\n\n\nclass Counter\n  _$counters = null\n  _ds = null\n  _counts = 0\n\n  _resetCounts = ->\n    _counts = 1\n    for i in [1..4]\n      $(_$counters[i]).addClass 'counts-off'\n\n  constructor: ($el, ds)->\n    _$counters = $el.children()\n    _ds = ds\n\n  lightup: ->\n    if _counts < 5\n      $(_$counters[_counts]).removeClass 'counts-off'\n      _counts++\n    else\n      _resetCounts()\n\n  addShareCounts: ->\n    _ds.get 'i5t7p2j10001do9', (data) ->\n      data.count++\n\n      _ds.set 'i5t7p2j10001do9', count: data.count\n      $sum.text data.count\n\n\ncounter = new Counter $counter, counterDS\ntimer = new Timer counter\ntimer.start()\n"]}